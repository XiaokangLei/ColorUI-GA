<!--pages/index/plugin/design/design.wxml-->
<cu-custom bgColor="bg-gradual-blue" isBack="{{true}}">
  <view slot="content">å¡ç‰‡è®¾è®¡</view>
</cu-custom>

<view class="container_index">
  <!-- é¢„è§ˆæ ·å¼ -->
  <view class="grid col-1 padding-sm">
    <view class="padding-sm">
      <view class="bg-{{bg_color}} padding-sm radius-lg text-center light">
        <view class="flex padding-xs justify-between">
          <view class="text-xsl">{{emoji}}</view>
          <view>
            <view class="padding-xs radius text-right " style="margin-top: -20rpx;">
              <text>{{date}}</text>
            </view>
            <view class="padding-xs radius text-xxxl text-right text-cut padding-tb">
              <text class="text-cut">{{title||'åœ¨ä¸‹æ–¹è¾“å…¥æ ‡é¢˜'}}</text>
            </view>
            <view class="padding-xs radius text-right text-cut" style="margin-bottom: -20rpx;">
              <text wx:if="{{m2.format(date)[0]}}" class="text-xl">è¿˜æœ‰</text>
              <text wx:else class="text-bold text-lg">å·²ç»</text>
              <text class="text-sl"> {{m2.format(date)[1]}} </text>
              <text class="text-xl">å¤©</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <view class="padding">
    <!-- é€‰é…è‰² -->
    <view class="grid col-1 margin-bottom text-center">
      <view class="flex">
        <view class="padding-left-sm">
          <view class="text-df padding-top-xs">æµ…è‰²</view>
          <view class="text-df padding-top-sm">æ·±è‰²</view>
        </view>
        <checkbox-group class="flex-sub" bindchange="checkboxChange">
          <label class="margin-xs" wx:for="{{checkboxItems}}" wx:key="value">
            <checkbox class="round padding-bottom-xs {{item.name}}" value="{{item.value}}" checked="{{item.checked}}" />
          </label>
        </checkbox-group>
      </view>
    </view>

    <!-- è®¾å®šæ ‡é¢˜ -->
    <view class="flex p-xs margin-bottom-sm mb-sm">
      <view class="flex-sub padding-xs margin-xs radius text-xl">ğŸ“„<text class="text-black">æ ‡é¢˜</text></view>
      <view class="flex-treble bg-grey light padding-xs margin-xs radius"><input class="text-grey" placeholder-style="color:grey;" bindinput="bindKeyInput" maxlength="7" placeholder="è¯·è¾“å…¥æ ‡é¢˜(8å­—ä»¥å†…)"></input></view>
    </view>

    <!-- é€‰æ‹©æ—¥æœŸ -->
    <view class="flex">
      <view class="flex-treble bg-grey light padding-sm margin-xs radius-lg text-xxl">
        <picker mode="date" value="{{date}}" bindchange="DateChange">
          <view class="picker ">
            ğŸ“†<text class="text-xxl" style="color:grey;">{{date}}</text>
          </view>
        </picker>
      </view>
      <view class="flex-sub bg-grey light margin-xs radius-lg text-sl" style="display: flex;justify-content: center; text-align: center;align-items: center;" bindtap="jumpPageChoise" data-page="choiseEmoji" hover-class="item-hover" hover-stay-time="100">{{emoji}}
      </view>
    </view>
  </view>

  <view class="margin-lr padding bg-white radius-lg">
    <view class="flex justify-between">
      <view class="text-black">æ“ä½œè¯´æ˜</view>
    </view>
    <view class="padding-top">
      <view class="text-sm">1ã€å•é€‰æ¡†é€‰æ‹©èƒŒæ™¯é¢œè‰²</view>
      <view class="text-sm padding-tb-xs">2ã€è¾“å…¥æ ‡é¢˜ï¼Œå½“å‰æ˜¾ç¤ºæœ€å¤§è¾“å…¥7ä¸ªå­—</view>
      <view class="text-sm">3ã€é€‰æ‹©æ—¶é—´åŠEmojiå›¾æ ‡</view>
      <view class="text-sm padding-tb-xs">4ã€ç”Ÿæˆå¯¹åº”çš„å¡ç‰‡ï¼Œå¯åº”ç”¨äºå€’æ•°æ—¥ã€åç‰‡ç­‰åœºæ™¯</view>
    </view>
  </view>
</view>

<import src="/pages/template/common/copyright.wxml" />
<view class="margin-top" style="margin-top: 10vh;">
  <template is="copyright"></template>
  <ad unit-id="adunit-7e063c3c010456be"></ad>
</view>

<wxs module="m1">
  function format(ts) {
    var d = getDate(ts)
    var myDate = getDate();
    return [d.getFullYear(), d.getMonth() + 1, d.getDate()].map(formatNumber).join('-')
  }
  function formatNumber(n) {
    n = n.toString()
    return n[1] ? n : '0' + n
  }
  module.exports.format = format
</wxs>

<wxs module="m2">
  function format(ts) {
    var d = getDate(ts)
    var myDate = getDate();
    var theTime = d - myDate
    var minute = 0; // åˆ†
    var hour = 0;//å°æ—¶
    var day = 0
    if (theTime > 60) {
      minute = parseInt(theTime / 60 / 1000);
      theTime = parseInt(theTime % 60);
      if (minute > 60) {
        hour = parseInt(minute / 60);
      }
      if (hour > 24) {
        day = parseInt(hour / 24 + 1);
      }
      else if (hour > 0) {
        day = 1
      }
      console.log(day)
      return [1, day]
    }
    else {
      theTime = myDate - d
      minute = parseInt(theTime / 60 / 1000);
      theTime = parseInt(theTime % 60);
      if (minute > 60) {
        hour = parseInt(minute / 60);
      }
      if (hour > 24) {
        day = parseInt(hour / 24 + 1);
      }
      else if (hour > 0) {
        day = 0
      }
      console.log(day)
      return [0, day]
    }
  }
  module.exports.format = format
</wxs>